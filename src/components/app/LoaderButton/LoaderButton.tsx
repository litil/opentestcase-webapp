import { useState } from 'react';

import { Loader } from '../Loader/Loader';

export const LoaderButton = ({ onClick, text }: { onClick: () => Promise<any>, text: string }) => {
	const [loading, setLoading] = useState(false);

	const generate = async () => {
		setLoading(true);

		await onClick();

		setLoading(false);
	};

	return (
		<button
			onClick={generate}
			type="button"
			className="inline-flex items-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"
		>
			{loading ? (
				<div className="inline-flex items-center">
					<div className="pr-2 -ml-1 -mt-1">
						<Loader />
					</div>{' '}
					Generating...
				</div>
			) : (
				<>{text}</>
			)}
		</button>
	);
};
