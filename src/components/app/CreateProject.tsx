import clsx from 'clsx';

import { projectTypes, websiteTitle } from '../../constants';
import { Layout } from './Layout';

export function CreateProject() {
	return (
		<Layout>
			<div className="flex flex-col gap-4">
				<div className="flex items-center justify-between">
					<h3 className="text-2xl font-bold">{websiteTitle} / Project</h3>
				</div>
				<div className="rounded-md border border-gray-300 px-4 py-8 sm:px-6 lg:px-8">
					<div className="flex w-full flex-col gap-4 sm:w-2/3 md:w-1/2">
						<form
							onSubmit={(e) => {
								e.preventDefault();
								// const form = e.currentTarget;
								// const formData = new FormData(form);
								// const data = {
								// 	...(Object.fromEntries(formData) as {
								// 		title: string;
								// 		description: string;
								// 		privacyLevel: PrivacyLevel;
								// 	}),
								// 	tags:
								// 		formData
								// 			.get('tags')
								// 			?.toString()
								// 			.split(',')
								// 			.map((x) => x.trim()) ?? [],
								// 	template: messages,
								// };
								// const { submitter } = e.nativeEvent as any as { submitter: HTMLButtonElement };
								// if (projectId && submitter.name === 'save') {
								// 	updateProjectMutation.mutate({ projectId, ...data });
								// } else {
								// 	addProjectMutation.mutate(data);
								// }
							}}
						>
							<fieldset>
								<legend className="text-lg font-medium text-gray-900">
									Save, publish, or copy project
								</legend>
								<div className="mt-4">
									<label className="block text-sm font-medium text-gray-700" htmlFor="projectName">
										Name
									</label>
									<div className="mt-1 w-full">
										<input
											type="text"
											name="title"
											id="projectName"
											className="block w-full rounded-md border border-gray-300 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
											placeholder="Project name"
											// defaultValue={projectName}
										/>
									</div>
								</div>
								<div className="mt-4">
									<label
										className="block text-sm font-medium text-gray-700"
										htmlFor="projectDescription"
									>
										Description
									</label>
									<div className="mt-1 w-full">
										<input
											type="text"
											name="description"
											id="projectDescription"
											className="block w-full rounded-md border border-gray-300 p-2 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
											placeholder="Project description"
											// defaultValue={projectDescription}
										/>
									</div>
								</div>
								<div className="mt-4">
									<label
										className="block text-sm font-medium text-gray-700"
										htmlFor="projectDescription"
									>
										Project management tool
									</label>
									<div className="mt-1 w-full">
										<select
											className="rounded-md border border-gray-300 p-1 text-sm"
											onChange={() => {}}
										>
											<option>Select a tool</option>
											{projectTypes.map(({ key, name }) => (
												<option key={key} value={key}>
													{name}
												</option>
											))}
										</select>
									</div>
								</div>
							</fieldset>
							<fieldset className="mt-8 flex flex-col items-start gap-4">
								<button
									className="min-w-[6rem] rounded bg-blue-500 px-4 py-2 font-medium text-white hover:bg-blue-700 disabled:opacity-50"
									type="submit"
									name="publish"
									// disabled={projectIsBeingSaved}
								>
									{/* {isPublic ? (
									<>
										{projectId && (addProjectMutation.isLoading ? 'Publishing' : 'Publish as a copy')}
										{!projectId && (addProjectMutation.isLoading ? 'Publishing' : 'Publish')}
									</>
								) : (
									<>
										{projectId && (addProjectMutation.isLoading ? 'Saving' : 'Save as a copy')}
										{!projectId && (addProjectMutation.isLoading ? 'Creating' : 'Create')}
									</>
								)} */}
									Create
								</button>
								<span
									className={clsx(
										'text-gray-600 opacity-0'
										// saved && saved === projectId ? 'opacity-100' : 'transition-opacity duration-1000'
									)}
								>
									Saved
								</span>
							</fieldset>
						</form>
					</div>
				</div>
			</div>
		</Layout>
	);
}
