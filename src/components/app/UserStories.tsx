import { useParams } from 'react-router-dom';

import { trpc } from '../trpc';
import { Layout } from './Layout';
import { UserStoriesList } from './UserStoriesList/UserStoriesList';

export function UserStories() {
	const { projectId } = useParams<{ projectId: string }>();
	const projectQuery = trpc.projects.getProject.useQuery(
		{
			projectId: projectId!,
		},
		{
			enabled: !!projectId,
			staleTime: 1000,
			retry: (retry, error) => {
				return retry < 3 && !error.data?.code;
			},
		}
	);
	const project = projectQuery.data;

	return (
		<Layout title={`Projects / ${project?.name} / User stories`}>
			<UserStoriesList />
		</Layout>
	);
}
