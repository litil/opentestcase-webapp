import { z } from 'zod';

import { getStory, listStories } from '../../../api';
import { apiProcedure, createTRPCRouter, orgProcedure } from '../trpc';

const projectSchema = z.object({
	name: z.string(),
	id: z.number(),
});
export type Project = z.infer<typeof projectSchema>;

export const userStoriesRouter = createTRPCRouter({
	getUserStories: apiProcedure
		.input(
			z.object({
				jiraDomain: z.string(),
				projectId: z.string(),
			})
		)
		.query(async ({ input, ctx }) => {
			return await listStories(input);
		}),

	getUserStory: apiProcedure
		.input(
			z.object({
				jiraDomain: z.string(),
				storyId: z.string(),
			})
		)
		.query(async ({ input, ctx }) => {
			return await getStory(input);
		}),
});
