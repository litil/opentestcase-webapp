export const listStories = async ({
	projectId,
	jiraDomain,
}: {
	projectId: string;
	jiraDomain: string;
}) => {
	console.log('listStories called', projectId);

	const myHeaders = new Headers();
	myHeaders.append('Accept', 'application/json');

	const requestOptions = {
		method: 'GET',
		headers: myHeaders,
		redirect: 'follow' as RequestRedirect,
	};

	const path =
		'https://jvjh52iftsbvpt3rdlwjg5pyra0odpce.lambda-url.eu-west-3.on.aws?' +
		new URLSearchParams({
			domain: jiraDomain,
			projectId,
		});
	console.log('path:', path);

	const req = await fetch(path, requestOptions);
	const res = await req.json();
	console.log('res:', res);

	return res.issues;
};
